# 教室预约系统的设计与开发



## 项目简介

北京邮电大学目前已经建成的非教学用途的建筑面积较小，可供学生举办活动、临时集体活动的独立场地较少，而校区空余教室空间十分充足，小组希望通过更加方便快捷的操作形式，优化当前的教室预约流程。为此，小组开发了“邮教有约”微信小程序，该小程序是一个线上教室预约平台，能够实时提供空教室信息并递交活动申请，提升教室预约流程的工作效率。



## 代码说明

项目的完整代码参见该网址中的各文件夹的内容，可导入微信开发者工具预览部分功能；由于微信小程序的权限问题，如需演示可通过报名表联系小组成员添加操作权限。



## 项目进程报告

以下为项目开展过程中的项目进程日志，为了保护隐私，用大家的姓名首字母代替姓名表示个人。



### 第一阶段 前期需求分析

#### 第01周（2019/11/18-2019/11/21）

小组成员在一次班级活动中未能及时借到教室，经过小组成员讨论，发现在不同时候参与活动时遇到的诸多问题，并由此萌生了开发一套全新的教室预约平台方案的想法。

#### 第02周（2019/11/25-2019/12/01）

小组在组建之后，研讨并确定了教室预约平台的方案，进行了初步的分工，进行一些基本的准备工作。

**<u>L：</u>**进行初步的调研工作，收集相关资料。

**<u>H：</u>**着手根据现有资料，开展调查工作。

**<u>X：</u>**深入了解原有教室预约流程，了解内容包括：申请方、审核方、中转机制。

**<u>R：</u>**询问同学他们对我校教室资源的使用情况的了解，以及他们借用教室的经历。

**<u>F：</u>**进行前期调研与讨论工作。

#### 第03周（2019/12/02-2019/12/08）

小组通过各种途径收集了零星的资料，初步佐证了小组成员的观点。

**<u>L：</u>**针对目前遇到的问题，设计调查问卷。

**<u>H：</u>**分析并撰写调查本校教师使用现有教室预约系统的体验情况问卷。

**<u>X：</u>**分析教室使用的主要人群及相应需求，如教师上课、学生组织开会、社团活动、个人自习等。

**<u>R：</u>**设计问卷问题，关于大家对借用教室的看法，以及改进方向的调研。

**<u>F：</u>**前期调查时，咨询了几位同学并且结合自己的经验，发现时效性是一个较为明显的问题，并准备进一步进行调查。

#### 第04周（2019/12/09-2019/12/15）

小组学习问卷相关知识，力求形成一份科学合理的问卷。

**<u>L：</u>**设计并改进调查问卷，并力求通过客观的方式获得大家对目前状况的真实看法。

**<u>H：</u>**采访一些学生和教师对现有教室预约系统的详细评价。

**<u>X：</u>**初步分析在现有预约机制下，申请方和审核方可能的不便之处，并在问卷中加以体现。

**<u>R：</u>**设计问卷问题，改进问卷。

**<u>F：</u>**考虑针对不同人群的问卷设计与调查。

#### 第05周（2019/12/16-2019/12/22）

小组着手整理资料，并形成一份调查问卷。

**<u>L：</u>**设计并改进调查问卷。

**<u>H：</u>**采访一些学生和教师对现有教室预约系统的详细评价。

**<u>X：</u>**就前段时间的分析结果设计面向使用者的调查问卷，包括对现有机制的满意度、希望得到的改进功能等。

**<u>R：</u>**改进问卷，设计问题的排序，设计具有鉴别作用的题目，确保问卷结果是有效的。

**<u>F：</u>**设计问卷时，结合目标人群的使用特点，期望能够调查学生对于借用教室流程中觉得不便的方面及审核人员的效率方面的问题。

#### 第06周（2019/12/23-2019/12/29）

小组开始投放调查问卷。

**<u>L：</u>**制作线上调查问卷，并提供技术支持。

**<u>H：</u>**在QQ群、微信群中发放了问卷，进行调查，获取数据。

**<u>X：</u>**在周围小范围内采访同学们对预约教室的需求及在预约过程中的困难。

**<u>R：</u>**向同学发放问卷，在同学之中收集看法，对未来计划的方向起到指导作用。

**<u>F：</u>**发放了针对学生的调查问卷。

#### 第07周（2019/12/30-2020/01/05）

小组进行了初步的分析，并取得了符合预期的结果。

**<u>L：</u>**制作线上调查问卷，并提供技术支持。

**<u>H：</u>**发放调查问卷。

**<u>X：</u>**投放问卷。

**<u>R：</u>**收集后台数据并进行初步分析。

**<u>F：</u>**发放了针对学生的调查问卷。

#### 第08周（2020/01/06-2020/01/12）

小组着手准备分析问卷相关数据，并准备开展下一部分的工作。

**<u>L：</u>**在辅导员中进行调查，分析不同用户受众的需求。

**<u>H：</u>**结合收集到的问卷以及采访数据再次分析对现有教室预约系统的改进方向，分析问卷数据。

**<u>X：</u>**通过整理问卷调查结果，进一步确定本项目所要包含的具体功能。

**<u>R：</u>**在辅导员中进行调查，收集看法，对未来计划的方向起到指导作用。

**<u>F：</u>**分析问卷得到结论，大部分同学希望更加便捷的预约教室并且得到及时反馈。



### 第二阶段 知识深入学习 实现方案研究

#### 第09周（2020/01/13-2020/01/19）

小组会议，讨论确定线上教室预约平台的定位和功能，确定组内分工方向以及学习任务。

**<u>L：</u>**研究教室申请的现有解决方案，了解目前的申请过程，并设计“活动”模块中相应的产品方案。

**<u>H：</u>**基础知识复习，复习微信小程序前端开发方法。

**<u>X：</u>**查找相关资料，了解开发项目所需学习的编程语言。

**<u>R：</u>**复习wxml的基本语法，并学习wxml中的部分组件功能。

**<u>F：</u>**根据自己的任务复习需要微信小程序相关的基础知识。

#### 第10周（2020/01/20-2020/01/26）

学习相关知识，进行方案研究设计。

**<u>L：</u>**研究教室审核的目前的实现流程，了解目前的审核过程，并设计“活动”模块中相应的产品方案。

**<u>H：</u>**wxml语法进阶学习。

**<u>X：</u>**复习wxml语法，学会绑定函数、设置属性等。

**<u>R：</u>**复习wxss的基本语法，并深入学习wxss中选择器、容器模型等知识。

**<u>F：</u>**复习wxml基础语法，如view等各种组件的使用方法，并进行下一步的学习。

#### 第11周（2020/01/27-2020/02/02）

学习相关知识，进行方案研究设计。

**<u>L：</u>**研究目前课程表软件的设计、教务系统的课程展示等解决方案，分析优缺点，并设计“查询”模块中相应的产品方案。

**<u>H：</u>**wxss语法进阶学习。

**<u>X：</u>**复习js语法，深入掌握编写函数表达式等。

**<u>R：</u>**复习js基本语法，学习异步函数、函数回调等知识。

**<u>F：</u>**复习wxss基础语法，进行简单的设计。

#### 第12周（2020/02/03-2020/02/09）

学习相关知识，进行方案研究设计。

**<u>L：</u>**通过教务系统获取并预处理目前的课程信息。

**<u>H：</u>**使用wxml、wxss进行页面样式设计尝试。

**<u>X：</u>**学习全局变量与局部变量及变量的书写及基本用法，学习闭包等相关知识。

**<u>R：</u>**学习异步函数回调的处理、了解Promise函数。

**<u>F：</u>**复习js基础语法，了解规范的代码形式，了解异步函数相关知识。

#### 第13周（2020/02/10-2020/02/16）

学习相关知识，进行方案研究设计。

**<u>L：</u>**获得统一登录的接口，用于程序身份验证，并开发相关接入接口。

**<u>H：</u>**js基本语法学习，异步函数、回调相关概念学习。

**<u>X：</u>**学习异步函数，了解其原理与语句执行的先后顺序。

**<u>R：</u>**复习Promise函数，学习闭包等知识。

**<u>F：</u>**学习一些函数的使用方法，了解一些微信小程序提供的API的用法。

#### 第14周（2020/02/17-2020/02/23）

进行方案研究设计，开始尝试进行开发工作。

**<u>L：</u>**进行课程数据库的搭建、测试与维护工作。

**<u>H：</u>**尝试使用wxml、wxss、js结合开发一个功能正常运行的小程序页面。

**<u>X：</u>**学习Promise函数。

**<u>R：</u>**学习云开发相关知识。

**<u>F：</u>**学习研究项目所需要的相关知识，了解使用微信小程序API、weui组件等。



### 第三阶段 平台功能开发

#### 第15周（2020/02/24-2020/03/01）

进行基本的页面架构实现，各自开发相关功能。

**<u>L：</u>**开发团体管理相关功能，进行基本的架构设计、实现方案分析。

**<u>H：</u>**平台“活动”页面样式以及功能设计。

**<u>X：</u>**编写wxml，构建临时消息发送接口。

**<u>R：</u>**云函数开发尝试。

**<u>F：</u>**学习picker组件的使用，设计双项选项。

#### 第16周（2020/03/02-2020/03/08）

简单实现部分基础功能，进行相关开发工作。

**<u>L：</u>**实现基本的团体列表功能，实现团体的创建功能。

**<u>H：</u>**“活动”页面wxml、wxss文件编写，能够呈现“活动”页面样式，导航栏以及页面动画等。

**<u>X：</u>**查找资料了解程序所需基本变量信息，如openid、access_token等。

**<u>R：</u>**开发课程查询云函数。

**<u>F：</u>**设计研究picker中涉及到的函数的功能。

#### 第17周（2020/03/09-2020/03/15）

增加部分基础功能的实现，进行相关开发工作。

**<u>L：</u>**实现团体成员功能，并实现团体成员基本的管理、团体成员管理员设定、负责人权限转让功能。

**<u>H：</u>**“活动”页面wxml、js文件编写，编写页面函数，实现“活动”页面功能。

**<u>X：</u>**了解微信小程序订阅消息功能，查找可用的消息模板。

**<u>R：</u>**课程查询云函数测试与优化。

**<u>F：</u>**学习picker组件的使用，设计单项选择以及时间的选择。

#### 第18周（2020/03/16-2020/03/22）

进一步完善基础功能的实现。

**<u>L：</u>**增加团体信息修改功能。

**<u>H：</u>**实现“活动”页面云数据库读取，获取当前用户的活动信息。

**<u>X：</u>**设计自定义模板信息，申请新模板关键字。

**<u>R：</u>**开发已有活动查询云函数。

**<u>F：</u>**写入所有选项的数组，修正逻辑关系。

#### 第19周（2020/03/23-2020/03/29）

开始增加一部分进阶功能，进行相关开发工作。

**<u>L：</u>**增加团体成员搜索及排序功能，优化动画展示。

**<u>H：</u>**“活动”页面整体调试和页面美化。

**<u>X：</u>**了解了access_token的时效性。

**<u>R：</u>**已有活动查询云函数测试与优化。

**<u>F：</u>**通过记录读取选项的值进行if的选择。

#### 第20周（2020/03/30-2020/04/05）

进一步添加进阶功能。

**<u>L：</u>**增加索引导航，设计索引导航动画。

**<u>H：</u>**“申请”页面样式以及功能设计。

**<u>X：</u>**学习获取access_token等基本变量，并储存在数据库中备用。

**<u>R：</u>**开发空教室分配云函数。

**<u>F：</u>**调整不同选项之间的关系。

#### 第21周（2020/04/06-2020/04/12）

完善并初步整合部分功能。

**<u>L：</u>**设计新小组、新成员提示，进一步改进动画展示。

**<u>H：</u>**  “申请”页面wxml、wxss文件编写，实现页面样式，设计列表选择器以及输入错误检查和提醒等。

**<u>X：</u>**编写申请消息发送权限。

**<u>R：</u>**空教室分配优化。

**<u>F：</u>**设计页面跳转及页面传值。

#### 第22周（2020/04/13-2020/04/19）

功能整合与部分功能完善。

**<u>L：</u>**增加群组权限设定及加入审批申请功能。

**<u>H：</u>**“申请”页面功能编写，包括自动获取时间更新列表选择器选项。  

**<u>X：</u>**发送订阅消息等函数并进行初步测试（如是否可以收到订阅消息、消息的排列顺序是否与模板一致等）。

**<u>R：</u>**开发中转流程云函数。

**<u>F：</u>**利用选项的值进查询教室在所查范围内的课程。

#### 第23周（2020/04/20-2020/04/26）

初次开发收尾，进行初步的测试与改进工作。

**<u>L：</u>**增加教师/辅导员绑定功能。

**<u>H：</u>**“申请”页面功能编写，实现表单数据与云数据库的对接提交，以及云数据库读取进行用户基本信息的自动填写。

**<u>X：</u>**编写js实现页面跳转，完整编写需要的订阅消息函数。

**<u>R：</u>**中转流程优化。

**<u>F：</u>**将所查内容返回并渲染。



### 第四阶段 系统功能优化完善

#### 第24周（2020/04/27-2020/05/03）

开始进行系统的完善优化工作。

**<u>L：</u>**增加“设置”相关功能。

**<u>H：</u>**“申请”页面功能调试、debug以及界面美化。

**<u>X：</u>**学习云函数，实现部分变量的实时获取以保证函数正常运行。

**<u>R：</u>**对云函数进行调试测试优化。

**<u>F：</u>**进行页面的简单设计。

#### 第25周（2020/05/04-2020/05/10）

开始DarkMode适配工作，完善界面风格。

**<u>L：</u>**进行全页面weui组件的DarkMode适配工作。

**<u>H：</u>**“结果“页面样式和功能设计。

**<u>X：</u>**引导界面wxss设计学习。

**<u>R：</u>**中转流程界面内容的完善。

**<u>F：</u>**修改页面部分布局，替换部分函数功能。

#### 第26周（2020/05/11-2020/05/17）

进行相关功能及界面风格的完善工作。

**<u>L：</u>**完善DarkMode适配工作。

**<u>H：</u>**  “结果“页面样式以及页面功能开发。  

**<u>X：</u>**将部分函数汇总合为一个函数，实现代码简化。

**<u>R：</u>**小程序云函数功能的完善。

**<u>F：</u>**修改选项逻辑之间的bug。

#### 第27周（2020/05/18-2020/05/24）

开始进行PC端微信小程序适配工作，完善相关界面。

**<u>L：</u>**开始适配PC端微信小程序，将部分列表组件在PC上的呈现形式改为宫格形式。

**<u>H：</u>**  “结果“页面实现云数据库读取，审批状态实时更新。  

**<u>X：</u>**将各函数分层次部署到各个页面。

**<u>R：</u>**协助进行小程序界面优化的完善。

**<u>F：</u>**进行界面优化，整改细节问题。

#### 第28周（2020/05/25-2020/05/31）

适配PC端横屏界面，更好利用屏幕可视面积。

**<u>L：</u>**适配PC端横屏界面，增加部分分栏与页面自适应设计。

**<u>H：</u>**程序页面样式和功能基本完成，分析讨论程序改进优化方向，进行进一步的平台优化和功能完善。

**<u>X：</u>**增加相关参数，优化相关设置。

**<u>R：</u>**进行相关测试。

**<u>F：</u>**进行任务交接，补充部分注释。

#### 第29周（2020/06/01-2020/06/07）

代码整体优化与改进。

**<u>L：</u>**进行相关代码测试优化工作。

**<u>H：</u>**为各页面开发适配DarkMode深色模式。

**<u>X：</u>**在各函数中增加运行错误提醒语句，使代码更加健全。

**<u>R：</u>**调试、优化、完善云函数相关功能。

**<u>F：</u>**完善查询部分的功能。



### 第五阶段 系统测试、改进 撰写报告

#### 第30周（2020/06/08-2020/06/14）

进行代码整合，整体测试。

**<u>L：</u>**整合各部分代码，进行初次整体测试。

**<u>H：</u>**为各页面在PC端微信小程序上的显示进行调整适配。

**<u>X：</u>**改进推送权限申请。

**<u>R：</u>**和小组成员的进度进行衔接，并交流收获与感受。

**<u>F：</u>**协助测试登陆、认证功能并进行优化。

#### 第31周（2020/06/15-2020/06/21）

进行全面测试，优化相关功能。

**<u>L：</u>**调试完善相关功能，增加更多报错提醒。

**<u>H：</u>**小组进行真机测试和云数据库测试。

**<u>X：</u>**进一步完善代码，增加电脑端引导。

**<u>R：</u>**测试优化相关中转代码。

**<u>F：</u>**协助测试我的团体中所包含的功能。

#### 第32周（2020/06/22-2020/06/28）

进行全面测试，优化相关功能。

**<u>L：</u>**进一步进行测试工作，修正部分bug。

**<u>H：</u>**平台最后阶段debug，云数据库功能进一步完善，进行灰度测试。

**<u>X：</u>**丰富各页面样式。

**<u>R：</u>**优化部分云函数运行性能。

**<u>F：</u>**协助测试查询教室及课程功能。

#### 第33周（2020/06/29-2020/07/05）

确定较为完好的版本，进行最后的测试工作。

**<u>L：</u>**确定接近完成的版本。

**<u>H：</u>**进一步完善并优化平台功能，美化界面设计。

**<u>X：</u>**完整测试。

**<u>R：</u>**进行整体测试。

**<u>F：</u>**协助全面测试程序，优化细节。

#### 第34-35周（2020/07/06-2020/07/16）

撰写报告，进行相关分析收尾工作。